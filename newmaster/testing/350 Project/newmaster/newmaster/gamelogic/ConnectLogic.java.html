<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>ConnectLogic.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Merged (Dec 6, 2018 7:56:07 PM)</a> &gt; <a href="../../index.html" class="el_group">newmaster</a> &gt; <a href="../index.html" class="el_bundle">newmaster</a> &gt; <a href="index.source.html" class="el_package">gamelogic</a> &gt; <span class="el_source">ConnectLogic.java</span></div><h1>ConnectLogic.java</h1><pre class="source lang-java linenums">package gamelogic;

//import playertype.ComputerPlayer;
import playertype.Player;

public class ConnectLogic {

  public int[][] gameGrid;

  private int width; // the width of the board
  private int height; // the height of the board
  private int numPlayers; //number of players in the game
  private int activePlayer; //the position of the player currently playing

<span class="fc" id="L15">  public Player[] playerlist = new Player[4]; //list holding all real players</span>
  //private ComputerPlayer[] complist = new ComputerPlayer[4]; //list holding all computer players


  /**************************************************************************
   *Connect Logic Constructor.
   */
<span class="fc" id="L22">  public ConnectLogic() {</span>
    
    //default size in case of error
<span class="fc" id="L25">    this.width = 7;</span>
<span class="fc" id="L26">    this.height = 6;</span>
<span class="fc" id="L27">    this.numPlayers = 0;</span>
<span class="fc" id="L28">  }</span>

  /**************************************************************************
   *Start Game: Initialize all spaces to be empty, and start with player 1.
   */
  public void startGame() {
    
<span class="fc" id="L35">    gameGrid = new int[width][height];</span>
    
<span class="fc bfc" id="L37" title="All 2 branches covered.">    for (int i = 0; i &lt; width - 1; i++) {</span>
<span class="fc bfc" id="L38" title="All 2 branches covered.">      for (int j = 0; j &lt; height - 1; j++) {</span>
<span class="fc" id="L39">        gameGrid[i][j] = 0;</span>
      }
    }

<span class="fc" id="L43">    activePlayer = 1;</span>

<span class="fc" id="L45">  }</span>


  /*************************************************************************
   * Update Grid Size: Variable game board sized for different number of 
   *                   players.
   */
  public void updateGridSize() {
<span class="fc bfc" id="L53" title="All 2 branches covered.">    if (numPlayers == 3) {</span>
<span class="fc" id="L54">      height = 7;</span>
<span class="fc" id="L55">      width = 9;</span>
<span class="fc bfc" id="L56" title="All 2 branches covered.">    } else if (numPlayers == 4) {</span>
<span class="fc" id="L57">      height = 7;</span>
<span class="fc" id="L58">      width = 11;</span>
<span class="fc" id="L59">    } else { //default for 2 players or error</span>
<span class="fc" id="L60">      height = 6;</span>
<span class="fc" id="L61">      width = 7;</span>
    }
 
<span class="fc" id="L64">  }</span>
  /**************************************************************************
   *Drop: Find the lowest space in the column, set it to be active player.
   *@param col the column of the game board in which to drop the chip
   */
  
  public int drop(int col) {

<span class="fc" id="L72">    int depth = 0;</span>

    //find the lowest point before chip hits bottom or another chip 
<span class="pc bpc" id="L75" title="1 of 2 branches missed.">    if (height &gt; 1) { //just in case</span>
<span class="fc bfc" id="L76" title="All 2 branches covered.">      while (gameGrid[col][depth + 1] == 0) {</span>
<span class="fc" id="L77">        depth++;</span>
<span class="fc bfc" id="L78" title="All 2 branches covered.">        if (depth + 1 &gt;= height) {</span>
<span class="fc" id="L79">          break;</span>
        }
      }
    }

    //System.out.println(depth);
<span class="fc" id="L85">    gameGrid[col][depth] = activePlayer;</span>
<span class="fc" id="L86">    return depth;</span>
  }

  /**************************************************************************
   *Next Turn: Increment whose turn it is, and run the logic for the current 
   *player to place a new chip.
   **************************************************************************/
  public int nextTurn(int input) {

<span class="fc" id="L95">    int column = -1;</span>
<span class="pc bpc" id="L96" title="1 of 2 branches missed.">    for (Player play : playerlist) { //Find if any players are the current player</span>
<span class="pc bpc" id="L97" title="1 of 2 branches missed.">      if (play != null) {</span>
<span class="fc bfc" id="L98" title="All 2 branches covered.">        if (play.getPosition() == activePlayer) {</span>
<span class="fc" id="L99">          column = play.playerTurn(this, input); //place the players new chip</span>
<span class="fc" id="L100">          break;</span>
        }
      }
    }

    //    for (ComputerPlayer play : complist) { 
    //      if (play != null) {
    //        if (play.getPosition() == activePlayer) {
    //          column = play.computerTurn(this); //place the computer players new chip
    //          break;
    //        }
    //      }
    //    }
    
<span class="fc" id="L114">    boolean possible = false;</span>
<span class="fc bfc" id="L115" title="All 2 branches covered.">    for (int i = 0; i &lt; width; i++) { //check if any more chips can be added</span>
<span class="fc bfc" id="L116" title="All 2 branches covered.">      if (gameGrid [i][0] == 0) {</span>
<span class="fc" id="L117">        possible = true;</span>
<span class="fc" id="L118">        break;</span>
      }
    }

<span class="fc bfc" id="L122" title="All 2 branches covered.">    if (!possible) {</span>
<span class="fc" id="L123">      column = -20; //if no more open slots, game over</span>
<span class="fc" id="L124">      System.out.println(&quot;Game board is filled, it's a tie!&quot;);</span>
    }
    
<span class="fc bfc" id="L127" title="All 2 branches covered.">    if (activePlayer &lt; numPlayers) { // set the next player</span>
<span class="fc" id="L128">      activePlayer++;</span>
<span class="fc" id="L129">    } else {</span>
<span class="fc" id="L130">      activePlayer = 1;</span>
    }

<span class="fc" id="L133">    return column; //if -1, end the game</span>
  }

  /**************************************************************************
   *Check Win: find if a line of 4 exists horizontally, vertically, or
   *           diagonally.
   **************************************************************************/

  public int checkWin() {
<span class="fc bfc" id="L142" title="All 2 branches covered.">    for (int i = 0; i &lt; width; i++) {</span>
<span class="fc bfc" id="L143" title="All 2 branches covered.">      for (int j = 0; j &lt; height; j++) {</span>

        //check for each player
<span class="fc bfc" id="L146" title="All 2 branches covered.">        for (int p = 1; p &lt;= numPlayers; p++) {</span>

<span class="fc bfc" id="L148" title="All 2 branches covered.">          if (j &lt; height - 3) {</span>


            //vertical win
<span class="fc bfc" id="L152" title="All 4 branches covered.">            if (gameGrid[i][j] == p &amp;&amp; gameGrid[i][j + 1] == p </span>
<span class="fc bfc" id="L153" title="All 4 branches covered.">                &amp;&amp; gameGrid[i][j + 2] == p &amp;&amp; gameGrid[i][j + 3] == p) {</span>
<span class="fc" id="L154">              return p;   </span>
            }
          }

<span class="fc bfc" id="L158" title="All 2 branches covered.">          if (i &lt; width - 3) {</span>

            //horizontal win
<span class="fc bfc" id="L161" title="All 4 branches covered.">            if (gameGrid[i][j] == p &amp;&amp; gameGrid[i + 1][j] == p </span>
<span class="fc bfc" id="L162" title="All 4 branches covered.">                &amp;&amp; gameGrid[i + 2][j] == p &amp;&amp; gameGrid[i + 3][j] == p) {</span>
<span class="fc" id="L163">              return p;   </span>
            }
          }

<span class="fc bfc" id="L167" title="All 4 branches covered.">          if (i &lt; width - 3 &amp;&amp; j &lt; height - 3) {</span>

            //diagonal down 
<span class="fc bfc" id="L170" title="All 4 branches covered.">            if (gameGrid[i][j] == p &amp;&amp; gameGrid[i + 1][j + 1] == p </span>
<span class="fc bfc" id="L171" title="All 4 branches covered.">                &amp;&amp; gameGrid[i + 2][j + 2] == p &amp;&amp; gameGrid[i + 3][j + 3] == p) {</span>
<span class="fc" id="L172">              return p;   </span>
            }
          }


<span class="fc bfc" id="L177" title="All 4 branches covered.">          if (i &lt; width - 3 &amp;&amp; j &gt;= 3) {</span>

            //diagonal up                       
<span class="fc bfc" id="L180" title="All 4 branches covered.">            if (gameGrid[i][j] == p &amp;&amp; gameGrid[i + 1][j - 1] == p </span>
<span class="pc bpc" id="L181" title="1 of 4 branches missed.">                &amp;&amp; gameGrid[i + 2][j - 2] == p &amp;&amp; gameGrid[i + 3][j - 3] == p) {</span>
<span class="nc" id="L182">              return p;   </span>
            }
          }
        }
      }
    }   

<span class="fc" id="L189">    return 0;</span>
  }


  /**************************************************************************
   *Is Valid: Returns the validity of a move, false if out of bounds.
   *@param col the column of the game board in order check validity
   */
  public boolean isValid(int col) {
<span class="fc" id="L198">    boolean valid = false;</span>
<span class="pc bpc" id="L199" title="2 of 4 branches missed.">    if (col &gt;= 0 &amp;&amp; col &lt; width) { //if within the column range</span>
<span class="fc bfc" id="L200" title="All 2 branches covered.">      for (int depth : gameGrid[col]) {</span>
<span class="fc bfc" id="L201" title="All 2 branches covered.">        if (depth == 0) { // if the column isn't filled with chips</span>
<span class="fc" id="L202">          valid = true;</span>
        }
      }
    }

<span class="fc" id="L207">    return valid;</span>
  }

  /**************************************************************************
   *Adds a player to the list of current players. 
   *@param play - the player to be added to the list
   */
  public void addPlayer(Player play) {
<span class="pc bpc" id="L215" title="1 of 2 branches missed.">    if (numPlayers &lt; 4) { //can't have more than 4</span>
<span class="pc bpc" id="L216" title="1 of 2 branches missed.">      for (int i = 0; i &lt; 4; i++) {</span>
<span class="fc bfc" id="L217" title="All 2 branches covered.">        if (playerlist[i] == null) {</span>
<span class="fc" id="L218">          playerlist[i] = play;</span>
<span class="fc" id="L219">          numPlayers++;</span>
<span class="fc" id="L220">          break;</span>
        }
      }
    }
<span class="fc" id="L224">    updateGridSize();</span>
<span class="fc" id="L225">    return;</span>
  }

  /**************************************************************************
     *Adds a computer player to the list of current players. 
     *@param play - the computer player to be added to the list
     */
  //  public void addPlayer(ComputerPlayer play) {
  //    if (numPlayers &lt; 4) { //can't have more than 4
  //      for (int i = 0; i &lt; 4; i++) {
  //        if (complist[i] == null) {
  //          complist[i] = play;
  //          numPlayers++;
  //          break;
  //        }
  //      }
  //    }
  //    return;  
  //  }


  /**************************************************************************
   *Return the game Grid.
   **************************************************************************/
  public int[][] getGrid() {
<span class="fc" id="L250">    return gameGrid;</span>
  }


  /**************************************************************************
   *Return the height of the grid.
   **************************************************************************/
  public int getY() {
<span class="fc" id="L258">    return height;</span>
  }


  /**************************************************************************
   *Return the width of the grid.
   **************************************************************************/
  public int getX() {
<span class="fc" id="L266">    return width;</span>
  }

  /**************************************************************************
   *Get return the name of the player that is currently playing.
   **************************************************************************/
  public Player getCurrentPlayer() {
<span class="fc" id="L273">    Player current = new Player();</span>
<span class="pc bpc" id="L274" title="1 of 2 branches missed.">    for (Player play : playerlist) { //check if a player is the current player</span>
<span class="pc bpc" id="L275" title="1 of 2 branches missed.">      if (play != null) {</span>
<span class="fc bfc" id="L276" title="All 2 branches covered.">        if (play.getPosition() == activePlayer) {</span>
<span class="fc" id="L277">          current = play;</span>
<span class="fc" id="L278">          break;</span>
        }
      }
    }

    //    for (ComputerPlayer play : complist) { //check if a computer player is the current player
    //      if (play != null) {
    //        if (play.getPosition() == activePlayer) {
    //          current = play.getName();
    //          break;
    //        }
    //      }
    //
    //    }
<span class="fc" id="L292">    return current;</span>
  }

  /**************************************************************************
   * Set Space: allows an individual space to be set for testing purposes.
   * @param col column place
   * @param depth depth place
   * @param player number of the player
   */
  public void setSpace(int col, int depth, int player) {
<span class="nc" id="L302">    gameGrid[col][depth] = player;</span>
<span class="nc" id="L303">  }</span>

  /**************************************************************************
   * Get Player List: used for testing.
   * @return list of players in the game
   */
  public Player[] getPlayerlist() {
<span class="nc" id="L310">    return playerlist;</span>
  }

  /**************************************************************************
   * Set Number of Players: used for testing.
   * @param n Number of players
   */
  public void setNumPlayers(int n) {
<span class="nc" id="L318">    numPlayers = n;</span>
<span class="nc" id="L319">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span>Merged (Dec 6, 2018 7:56:07 PM)</div></body></html>